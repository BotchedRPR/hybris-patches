From 78e430bd0e1967e6204580b1ecd4a2e66ddb7cac Mon Sep 17 00:00:00 2001
From: Alexander Martinz <amartinz@shiftphones.com>
Date: Wed, 9 Mar 2022 13:30:51 +0100
Subject: [PATCH] (halium) adb: disable auth requirement for recovery by
 default

Our installer expects the recovery to have full adb access by default.

Change-Id: Ic0fb6ee2aaf4bbf1e9b7d28904ae5f667a1d71d8
Signed-off-by: Katharine Chui <kwchuiaa@connect.ust.hk>
---
 adb/daemon/main.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/adb/daemon/main.cpp b/adb/daemon/main.cpp
index 1e33128f5..fb25a0987 100644
--- a/adb/daemon/main.cpp
+++ b/adb/daemon/main.cpp
@@ -220,7 +220,7 @@ int adbd_main(int server_port) {
 #if defined(__ANDROID_RECOVERY__)
     if (android::base::GetProperty("ro.build.type", "") == "userdebug") {
         auth_required = auth_required &&
-                        android::base::GetBoolProperty("ro.adb.secure.recovery", true);
+                        android::base::GetBoolProperty("ro.adb.secure.recovery", false);
     }
 #endif
 #endif
-- 
2.35.3

